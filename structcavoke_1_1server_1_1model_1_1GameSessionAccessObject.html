<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
  <meta http-equiv="X-UA-Compatible" content="IE=9"/>
  <meta name="generator" content="Doxygen 1.9.6"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <!-- BEGIN opengraph metadata -->
  <meta property="og:title" content="Cavoke" />
  <meta property="og:image" content="https://opengraph.githubassets.com/3578ce4391b1dea8c66c1a2b0696e99ad00c539da62f9d115ed6eff5ba32828f/cavoke-project/cavoke" />
  <meta property="og:description" content="A Platform for creating and hosting multiplayer turn-based board games." />
  <meta property="og:url" content="https://cavoke.wlko.me/" />
  <!-- END opengraph metadata -->
  <!-- BEGIN twitter metadata -->
  <meta name="twitter:image:src" content="https://opengraph.githubassets.com/3578ce4391b1dea8c66c1a2b0696e99ad00c539da62f9d115ed6eff5ba32828f/cavoke-project/cavoke" />
  <meta name="twitter:title" content="Cavoke" />
  <meta name="twitter:description" content="A Platform for creating and hosting multiplayer turn-based board games." />
  <!-- END twitter metadata -->
  <title>Cavoke: cavoke::server::model::GameSessionAccessObject Struct Reference</title>
  <link href="tabs.css" rel="stylesheet" type="text/css"/>
  <link rel="icon" type="image/png" href="logo55.png"/>
  <script type="text/javascript" src="jquery.js"></script>
  <script type="text/javascript" src="dynsections.js"></script>
  <script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
  <script type="text/javascript" src="doxygen-awesome-fragment-copy-button.js"></script>
  <script type="text/javascript" src="doxygen-awesome-paragraph-link.js"></script>
  <script type="text/javascript" src="toggle-alternative-theme.js"></script>
  <script type="text/javascript">
    DoxygenAwesomeFragmentCopyButton.init()
    DoxygenAwesomeDarkModeToggle.init()
    DoxygenAwesomeParagraphLink.init()
  </script>
  <link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
  <link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
  <link href="doxygen.css" rel="stylesheet" type="text/css" />
  <link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="custom.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
<link href="custom-alternative.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- https://tholman.com/github-corners/ -->
<a href="https://github.com/cavoke-project/cavoke" class="github-corner" title="View source on GitHub" target="_blank">
  <svg viewBox="0 0 250 250" width="40" height="40" style="position: absolute; top: 0; border: 0; right: 0; z-index: 99;" aria-hidden="true">
    <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
  <div id="titlearea">
    <table cellspacing="0" cellpadding="0">
      <tbody>
      <tr style="height: 56px;">
        <td id="projectlogo"><img alt="Logo" src="logo55.png"/></td>
        <td id="projectalign" style="padding-left: 0.5em;">
          <div id="projectname">Cavoke
            &#160;<span id="projectnumber">1.1.0</span>
          </div>
          <div id="projectbrief">A Platform for creating and hosting multiplayer turn-based board games</div>
        </td>
      </tr>
      </tbody>
    </table>
  </div>
  <!-- end header part -->
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('structcavoke_1_1server_1_1model_1_1GameSessionAccessObject.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="structcavoke_1_1server_1_1model_1_1GameSessionAccessObject-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">cavoke::server::model::GameSessionAccessObject Struct Reference</div></div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="game__session_8h_source.html">game_session.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcavoke_1_1server_1_1model_1_1GameSessionAccessObject_1_1GameSessionInfo.html">GameSessionInfo</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Serializable representation of session for client.  <a href="structcavoke_1_1server_1_1model_1_1GameSessionAccessObject_1_1GameSessionInfo.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcavoke_1_1server_1_1model_1_1GameSessionAccessObject_1_1PlayerInfo.html">PlayerInfo</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Serializable representation of participant for client.  <a href="structcavoke_1_1server_1_1model_1_1GameSessionAccessObject_1_1PlayerInfo.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcavoke_1_1server_1_1model_1_1GameSessionAccessObject_1_1UserInfo.html">UserInfo</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-types" name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:a076a71206ce6e2c9df02f86b5e722fde"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><b>SessionStatus</b> { <b>NOT_STARTED</b> = 0
, <b>RUNNING</b> = 1
, <b>FINISHED</b> = 2
 }</td></tr>
<tr class="separator:a076a71206ce6e2c9df02f86b5e722fde"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a0c44d2109e9305b93865374cd1e0c1d0"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcavoke_1_1server_1_1model_1_1GameSessionAccessObject.html#a0c44d2109e9305b93865374cd1e0c1d0">GameSessionAccessObject</a> (drogon::orm::DbClientPtr dbClient=drogon::app().getDbClient())</td></tr>
<tr class="separator:a0c44d2109e9305b93865374cd1e0c1d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adaf514608fe677fa9d1b5d767746fece"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcavoke_1_1server_1_1model_1_1GameSessionAccessObject.html#adaf514608fe677fa9d1b5d767746fece">GameSessionAccessObject</a> (std::string session_id, <a class="el" href="structcavoke_1_1server_1_1model_1_1GameConfig.html">GameConfig</a> game_config, drogon::orm::DbClientPtr dbClient=drogon::app().getDbClient())</td></tr>
<tr class="separator:adaf514608fe677fa9d1b5d767746fece"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a984d58239689554f5d7a161531e9c00e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcavoke_1_1server_1_1model_1_1GameSessionAccessObject.html#a984d58239689554f5d7a161531e9c00e">add_user</a> (const std::string &amp;user_id, std::optional&lt; int &gt; player_id={})</td></tr>
<tr class="memdesc:a984d58239689554f5d7a161531e9c00e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adds given user to the session into given or minimal available position.  <br /></td></tr>
<tr class="separator:a984d58239689554f5d7a161531e9c00e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a34213ab80873c405f0b40ffe5a9caf76"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcavoke_1_1server_1_1model_1_1GameSessionAccessObject.html#a34213ab80873c405f0b40ffe5a9caf76">remove_user</a> (const std::string &amp;user_id)</td></tr>
<tr class="memdesc:a34213ab80873c405f0b40ffe5a9caf76"><td class="mdescLeft">&#160;</td><td class="mdescRight">Removes given user.  <br /></td></tr>
<tr class="separator:a34213ab80873c405f0b40ffe5a9caf76"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adcbb4eae4cbc6d00f1b953ea284f7ef4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcavoke_1_1server_1_1model_1_1GameSessionAccessObject.html#adcbb4eae4cbc6d00f1b953ea284f7ef4">set_role</a> (const std::string &amp;user_id, int new_role)</td></tr>
<tr class="memdesc:adcbb4eae4cbc6d00f1b953ea284f7ef4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Changes game role for given user.  <br /></td></tr>
<tr class="separator:adcbb4eae4cbc6d00f1b953ea284f7ef4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6570ed1b9447dd36fb587acb97a855e2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcavoke_1_1server_1_1model_1_1GameSessionAccessObject.html#a6570ed1b9447dd36fb587acb97a855e2">delete_session</a> ()</td></tr>
<tr class="memdesc:a6570ed1b9447dd36fb587acb97a855e2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Delete current session.  <br /></td></tr>
<tr class="separator:a6570ed1b9447dd36fb587acb97a855e2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3b7f5ba729434c0ea9fe2eea8d3c28f8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcavoke_1_1server_1_1model_1_1GameSessionAccessObject.html#a3b7f5ba729434c0ea9fe2eea8d3c28f8">leave_session</a> (const std::string &amp;user_id)</td></tr>
<tr class="memdesc:a3b7f5ba729434c0ea9fe2eea8d3c28f8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Leave current session (and transfer host/delete session)  <br /></td></tr>
<tr class="separator:a3b7f5ba729434c0ea9fe2eea8d3c28f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af1187d376591117f16eafbd456efc875"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcavoke_1_1server_1_1model_1_1GameSessionAccessObject.html#af1187d376591117f16eafbd456efc875">start</a> (const json &amp;game_settings)</td></tr>
<tr class="memdesc:af1187d376591117f16eafbd456efc875"><td class="mdescLeft">&#160;</td><td class="mdescRight">Marks session as starts.  <br /></td></tr>
<tr class="separator:af1187d376591117f16eafbd456efc875"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0f5f6679b247d28f2423510a32173b78"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcavoke_1_1server_1_1model_1_1GameSessionAccessObject.html#a0f5f6679b247d28f2423510a32173b78">update_status</a> (bool is_terminal)</td></tr>
<tr class="separator:a0f5f6679b247d28f2423510a32173b78"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a308b4501ac24349d3f7752a05018191e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcavoke_1_1server_1_1model_1_1GameSessionAccessObject.html#a308b4501ac24349d3f7752a05018191e">get_player_id</a> (const std::string &amp;user_id) const</td></tr>
<tr class="separator:a308b4501ac24349d3f7752a05018191e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8307535d21b178b905c1fae6ab2bb7d6"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcavoke_1_1server_1_1model_1_1GameSessionAccessObject.html#a8307535d21b178b905c1fae6ab2bb7d6">get_host</a> () const</td></tr>
<tr class="separator:a8307535d21b178b905c1fae6ab2bb7d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa2d19abe2bb91ddf81b66d7e66e6f10d"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcavoke_1_1server_1_1model_1_1GameSessionAccessObject.html#aa2d19abe2bb91ddf81b66d7e66e6f10d">is_player</a> (const std::string &amp;user_id) const</td></tr>
<tr class="separator:aa2d19abe2bb91ddf81b66d7e66e6f10d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adffc8d2ed67fb8f3733d994dc8f7b135"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcavoke_1_1server_1_1model_1_1GameSessionAccessObject.html#adffc8d2ed67fb8f3733d994dc8f7b135">is_host</a> (const std::string &amp;user_id) const</td></tr>
<tr class="separator:adffc8d2ed67fb8f3733d994dc8f7b135"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af53f7ec25cba47c27079f5d24facec5b"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcavoke_1_1server_1_1model_1_1GameSessionAccessObject.html#af53f7ec25cba47c27079f5d24facec5b">get_user_id</a> (int player_id) const</td></tr>
<tr class="separator:af53f7ec25cba47c27079f5d24facec5b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3bb06ca270bc60b806d9d08e91f758d3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structcavoke_1_1server_1_1model_1_1GameSessionAccessObject_1_1GameSessionInfo.html">GameSessionInfo</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcavoke_1_1server_1_1model_1_1GameSessionAccessObject.html#a3bb06ca270bc60b806d9d08e91f758d3">get_session_info</a> () const</td></tr>
<tr class="memdesc:a3bb06ca270bc60b806d9d08e91f758d3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generates an info object (representation for client)  <br /></td></tr>
<tr class="separator:a3bb06ca270bc60b806d9d08e91f758d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a96d130a6d691003db9ec08f8e7b0a29f"><td class="memItemLeft" align="right" valign="top">std::vector&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcavoke_1_1server_1_1model_1_1GameSessionAccessObject.html#a96d130a6d691003db9ec08f8e7b0a29f">get_occupied_positions</a> () const</td></tr>
<tr class="separator:a96d130a6d691003db9ec08f8e7b0a29f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af6e7e6170a33378238b74470d9293a9f"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="structcavoke_1_1server_1_1model_1_1GameSessionAccessObject_1_1PlayerInfo.html">PlayerInfo</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcavoke_1_1server_1_1model_1_1GameSessionAccessObject.html#af6e7e6170a33378238b74470d9293a9f">get_players</a> () const</td></tr>
<tr class="separator:af6e7e6170a33378238b74470d9293a9f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-static-methods" name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:af05c96d954d6ccff5a2821d0d09de02c"><td class="memItemLeft" align="right" valign="top">static drogon_model::cavoke_orm::Sessions&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcavoke_1_1server_1_1model_1_1GameSessionAccessObject.html#af05c96d954d6ccff5a2821d0d09de02c">get_snapshot</a> (const std::string &amp;session_id)</td></tr>
<tr class="memdesc:af05c96d954d6ccff5a2821d0d09de02c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fetches current session information from the DB.  <br /></td></tr>
<tr class="separator:af05c96d954d6ccff5a2821d0d09de02c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a21f5c311954205dd0418094e7c9deaf2"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="structcavoke_1_1server_1_1model_1_1GameSessionAccessObject_1_1GameSessionInfo.html">GameSessionInfo</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcavoke_1_1server_1_1model_1_1GameSessionAccessObject.html#a21f5c311954205dd0418094e7c9deaf2">make_session_info</a> (const drogon_model::cavoke_orm::Sessions &amp;session, const drogon_model::cavoke_orm::Statuses &amp;status, std::vector&lt; <a class="el" href="structcavoke_1_1server_1_1model_1_1GameSessionAccessObject_1_1PlayerInfo.html">PlayerInfo</a> &gt; players)</td></tr>
<tr class="memdesc:a21f5c311954205dd0418094e7c9deaf2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Builds a session info from a session.  <br /></td></tr>
<tr class="separator:a21f5c311954205dd0418094e7c9deaf2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Access object for a game session. The fields of sessions may be spontaneously changed in another instance of the server. Therefore this class only provides methods to fetch DB data. Drogon ORM struct serves as the data holder. </p>

<p class="definition">Definition at line <a class="el" href="game__session_8h_source.html#l00031">31</a> of file <a class="el" href="game__session_8h_source.html">game_session.h</a>.</p>
</div><h2 class="groupheader">Member Enumeration Documentation</h2>
<a id="a076a71206ce6e2c9df02f86b5e722fde" name="a076a71206ce6e2c9df02f86b5e722fde"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a076a71206ce6e2c9df02f86b5e722fde">&#9670;&#160;</a></span>SessionStatus</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum cavoke::server::model::GameSessionAccessObject::SessionStatus</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="game__session_8h_source.html#l00032">32</a> of file <a class="el" href="game__session_8h_source.html">game_session.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a0c44d2109e9305b93865374cd1e0c1d0" name="a0c44d2109e9305b93865374cd1e0c1d0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0c44d2109e9305b93865374cd1e0c1d0">&#9670;&#160;</a></span>GameSessionAccessObject() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">cavoke::server::model::GameSessionAccessObject::GameSessionAccessObject </td>
          <td>(</td>
          <td class="paramtype">drogon::orm::DbClientPtr&#160;</td>
          <td class="paramname"><em>dbClient</em> = <code>drogon::app().getDbClient()</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="game__session_8h_source.html#l00033">33</a> of file <a class="el" href="game__session_8h_source.html">game_session.h</a>.</p>

</div>
</div>
<a id="adaf514608fe677fa9d1b5d767746fece" name="adaf514608fe677fa9d1b5d767746fece"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adaf514608fe677fa9d1b5d767746fece">&#9670;&#160;</a></span>GameSessionAccessObject() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">cavoke::server::model::GameSessionAccessObject::GameSessionAccessObject </td>
          <td>(</td>
          <td class="paramtype">std::string&#160;</td>
          <td class="paramname"><em>session_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structcavoke_1_1server_1_1model_1_1GameConfig.html">GameConfig</a>&#160;</td>
          <td class="paramname"><em>game_config</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">drogon::orm::DbClientPtr&#160;</td>
          <td class="paramname"><em>dbClient</em> = <code>drogon::app().getDbClient()</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="game__session_8h_source.html#l00037">37</a> of file <a class="el" href="game__session_8h_source.html">game_session.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a984d58239689554f5d7a161531e9c00e" name="a984d58239689554f5d7a161531e9c00e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a984d58239689554f5d7a161531e9c00e">&#9670;&#160;</a></span>add_user()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cavoke::server::model::GameSessionAccessObject::add_user </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>user_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::optional&lt; int &gt;&#160;</td>
          <td class="paramname"><em>player_id</em> = <code>{}</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Adds given user to the session into given or minimal available position. </p>
<p>Adds given user to session. Throws an exception if user already in this session, session has already started or too many players in a session </p>

<p class="definition">Definition at line <a class="el" href="game__session_8cpp_source.html#l00017">17</a> of file <a class="el" href="game__session_8cpp_source.html">game_session.cpp</a>.</p>

</div>
</div>
<a id="a6570ed1b9447dd36fb587acb97a855e2" name="a6570ed1b9447dd36fb587acb97a855e2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6570ed1b9447dd36fb587acb97a855e2">&#9670;&#160;</a></span>delete_session()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cavoke::server::model::GameSessionAccessObject::delete_session </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Delete current session. </p>

<p class="definition">Definition at line <a class="el" href="game__session_8cpp_source.html#l00244">244</a> of file <a class="el" href="game__session_8cpp_source.html">game_session.cpp</a>.</p>

</div>
</div>
<a id="a8307535d21b178b905c1fae6ab2bb7d6" name="a8307535d21b178b905c1fae6ab2bb7d6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8307535d21b178b905c1fae6ab2bb7d6">&#9670;&#160;</a></span>get_host()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string cavoke::server::model::GameSessionAccessObject::get_host </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="game__session_8cpp_source.html#l00178">178</a> of file <a class="el" href="game__session_8cpp_source.html">game_session.cpp</a>.</p>

</div>
</div>
<a id="a96d130a6d691003db9ec08f8e7b0a29f" name="a96d130a6d691003db9ec08f8e7b0a29f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a96d130a6d691003db9ec08f8e7b0a29f">&#9670;&#160;</a></span>get_occupied_positions()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; int &gt; cavoke::server::model::GameSessionAccessObject::get_occupied_positions </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="game__session_8cpp_source.html#l00114">114</a> of file <a class="el" href="game__session_8cpp_source.html">game_session.cpp</a>.</p>

</div>
</div>
<a id="a308b4501ac24349d3f7752a05018191e" name="a308b4501ac24349d3f7752a05018191e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a308b4501ac24349d3f7752a05018191e">&#9670;&#160;</a></span>get_player_id()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cavoke::server::model::GameSessionAccessObject::get_player_id </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>user_id</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Gets player id for user. Throws an exception if user not in this session </p>

<p class="definition">Definition at line <a class="el" href="game__session_8cpp_source.html#l00074">74</a> of file <a class="el" href="game__session_8cpp_source.html">game_session.cpp</a>.</p>

</div>
</div>
<a id="af6e7e6170a33378238b74470d9293a9f" name="af6e7e6170a33378238b74470d9293a9f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af6e7e6170a33378238b74470d9293a9f">&#9670;&#160;</a></span>get_players()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; <a class="el" href="structcavoke_1_1server_1_1model_1_1GameSessionAccessObject_1_1PlayerInfo.html">GameSessionAccessObject::PlayerInfo</a> &gt; cavoke::server::model::GameSessionAccessObject::get_players </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="game__session_8cpp_source.html#l00132">132</a> of file <a class="el" href="game__session_8cpp_source.html">game_session.cpp</a>.</p>

</div>
</div>
<a id="a3bb06ca270bc60b806d9d08e91f758d3" name="a3bb06ca270bc60b806d9d08e91f758d3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3bb06ca270bc60b806d9d08e91f758d3">&#9670;&#160;</a></span>get_session_info()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structcavoke_1_1server_1_1model_1_1GameSessionAccessObject_1_1GameSessionInfo.html">GameSessionAccessObject::GameSessionInfo</a> cavoke::server::model::GameSessionAccessObject::get_session_info </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Generates an info object (representation for client) </p>

<p class="definition">Definition at line <a class="el" href="game__session_8cpp_source.html#l00108">108</a> of file <a class="el" href="game__session_8cpp_source.html">game_session.cpp</a>.</p>

</div>
</div>
<a id="af05c96d954d6ccff5a2821d0d09de02c" name="af05c96d954d6ccff5a2821d0d09de02c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af05c96d954d6ccff5a2821d0d09de02c">&#9670;&#160;</a></span>get_snapshot()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">drogon_model::cavoke_orm::Sessions cavoke::server::model::GameSessionAccessObject::get_snapshot </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>session_id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Fetches current session information from the DB. </p>

<p class="definition">Definition at line <a class="el" href="game__session_8cpp_source.html#l00196">196</a> of file <a class="el" href="game__session_8cpp_source.html">game_session.cpp</a>.</p>

</div>
</div>
<a id="af53f7ec25cba47c27079f5d24facec5b" name="af53f7ec25cba47c27079f5d24facec5b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af53f7ec25cba47c27079f5d24facec5b">&#9670;&#160;</a></span>get_user_id()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string cavoke::server::model::GameSessionAccessObject::get_user_id </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>player_id</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Gets user id for player. Throws an exception if player not in this session </p>

<p class="definition">Definition at line <a class="el" href="game__session_8cpp_source.html#l00092">92</a> of file <a class="el" href="game__session_8cpp_source.html">game_session.cpp</a>.</p>

</div>
</div>
<a id="adffc8d2ed67fb8f3733d994dc8f7b135" name="adffc8d2ed67fb8f3733d994dc8f7b135"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adffc8d2ed67fb8f3733d994dc8f7b135">&#9670;&#160;</a></span>is_host()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool cavoke::server::model::GameSessionAccessObject::is_host </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>user_id</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="game__session_8cpp_source.html#l00182">182</a> of file <a class="el" href="game__session_8cpp_source.html">game_session.cpp</a>.</p>

</div>
</div>
<a id="aa2d19abe2bb91ddf81b66d7e66e6f10d" name="aa2d19abe2bb91ddf81b66d7e66e6f10d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa2d19abe2bb91ddf81b66d7e66e6f10d">&#9670;&#160;</a></span>is_player()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool cavoke::server::model::GameSessionAccessObject::is_player </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>user_id</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="game__session_8cpp_source.html#l00169">169</a> of file <a class="el" href="game__session_8cpp_source.html">game_session.cpp</a>.</p>

</div>
</div>
<a id="a3b7f5ba729434c0ea9fe2eea8d3c28f8" name="a3b7f5ba729434c0ea9fe2eea8d3c28f8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3b7f5ba729434c0ea9fe2eea8d3c28f8">&#9670;&#160;</a></span>leave_session()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cavoke::server::model::GameSessionAccessObject::leave_session </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>user_id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Leave current session (and transfer host/delete session) </p>

<p class="definition">Definition at line <a class="el" href="game__session_8cpp_source.html#l00250">250</a> of file <a class="el" href="game__session_8cpp_source.html">game_session.cpp</a>.</p>

</div>
</div>
<a id="a21f5c311954205dd0418094e7c9deaf2" name="a21f5c311954205dd0418094e7c9deaf2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a21f5c311954205dd0418094e7c9deaf2">&#9670;&#160;</a></span>make_session_info()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structcavoke_1_1server_1_1model_1_1GameSessionAccessObject_1_1GameSessionInfo.html">GameSessionAccessObject::GameSessionInfo</a> cavoke::server::model::GameSessionAccessObject::make_session_info </td>
          <td>(</td>
          <td class="paramtype">const drogon_model::cavoke_orm::Sessions &amp;&#160;</td>
          <td class="paramname"><em>session</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const drogon_model::cavoke_orm::Statuses &amp;&#160;</td>
          <td class="paramname"><em>status</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; <a class="el" href="structcavoke_1_1server_1_1model_1_1GameSessionAccessObject_1_1PlayerInfo.html">PlayerInfo</a> &gt;&#160;</td>
          <td class="paramname"><em>players</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Builds a session info from a session. </p>

<p class="definition">Definition at line <a class="el" href="game__session_8cpp_source.html#l00205">205</a> of file <a class="el" href="game__session_8cpp_source.html">game_session.cpp</a>.</p>

</div>
</div>
<a id="a34213ab80873c405f0b40ffe5a9caf76" name="a34213ab80873c405f0b40ffe5a9caf76"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a34213ab80873c405f0b40ffe5a9caf76">&#9670;&#160;</a></span>remove_user()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cavoke::server::model::GameSessionAccessObject::remove_user </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>user_id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Removes given user. </p>

<p class="definition">Definition at line <a class="el" href="game__session_8cpp_source.html#l00215">215</a> of file <a class="el" href="game__session_8cpp_source.html">game_session.cpp</a>.</p>

</div>
</div>
<a id="adcbb4eae4cbc6d00f1b953ea284f7ef4" name="adcbb4eae4cbc6d00f1b953ea284f7ef4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adcbb4eae4cbc6d00f1b953ea284f7ef4">&#9670;&#160;</a></span>set_role()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cavoke::server::model::GameSessionAccessObject::set_role </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>user_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>new_role</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Changes game role for given user. </p>

<p class="definition">Definition at line <a class="el" href="game__session_8cpp_source.html#l00225">225</a> of file <a class="el" href="game__session_8cpp_source.html">game_session.cpp</a>.</p>

</div>
</div>
<a id="af1187d376591117f16eafbd456efc875" name="af1187d376591117f16eafbd456efc875"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af1187d376591117f16eafbd456efc875">&#9670;&#160;</a></span>start()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cavoke::server::model::GameSessionAccessObject::start </td>
          <td>(</td>
          <td class="paramtype">const json &amp;&#160;</td>
          <td class="paramname"><em>game_settings</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Marks session as starts. </p>

<p class="definition">Definition at line <a class="el" href="game__session_8cpp_source.html#l00155">155</a> of file <a class="el" href="game__session_8cpp_source.html">game_session.cpp</a>.</p>

</div>
</div>
<a id="a0f5f6679b247d28f2423510a32173b78" name="a0f5f6679b247d28f2423510a32173b78"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0f5f6679b247d28f2423510a32173b78">&#9670;&#160;</a></span>update_status()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cavoke::server::model::GameSessionAccessObject::update_status </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>is_terminal</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Updates current session status using given <code>is_terminal</code> value. Finishes if terminal, Rewrites status if not. This is required for transaction isolation, so that <code>is_terminal</code> correlates with the session status. </p>

<p class="definition">Definition at line <a class="el" href="game__session_8cpp_source.html#l00186">186</a> of file <a class="el" href="game__session_8cpp_source.html">game_session.cpp</a>.</p>

</div>
</div>
<hr/>The documentation for this struct was generated from the following files:<ul>
<li>server/model/sessions/<a class="el" href="game__session_8h_source.html">game_session.h</a></li>
<li>server/model/sessions/<a class="el" href="game__session_8cpp_source.html">game_session.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><b>cavoke</b></li><li class="navelem"><b>server</b></li><li class="navelem"><b>model</b></li><li class="navelem"><a class="el" href="structcavoke_1_1server_1_1model_1_1GameSessionAccessObject.html">GameSessionAccessObject</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.6 </li>
  </ul>
</div>
</body>
</html>
